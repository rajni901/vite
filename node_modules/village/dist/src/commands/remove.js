"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.remove = void 0;
const auth_1 = require("@common/auth");
const villageClient_1 = require("@common/villageClient");
const remove = (program) => {
    program
        .command('remove')
        .description('Remove a script')
        .argument('<id>', 'The id of the script to remove.')
        .action(async function () {
        const id = program.args[1];
        const debug = this.opts().debug;
        const authed = await (0, auth_1.setAuthHeader)({ debug });
        if (!authed) {
            return;
        }
        villageClient_1.villageClient.scripts
            .deleteScript(id)
            .then(() => {
            console.log(`Removed script ${id}`);
        })
            .catch(auth_1.warnUnauthenticated)
            .catch((err) => {
            if (err.status === 404) {
                console.log(`Script ${id} not found.`);
            }
            debug && console.error(err);
        });
    });
};
exports.remove = remove;
//# sourceMappingURL=remove.js.map