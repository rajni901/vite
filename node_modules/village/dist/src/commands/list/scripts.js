"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.scripts = void 0;
const tslib_1 = require("tslib");
const villageClient_1 = require("@common/villageClient");
const cli_table3_1 = tslib_1.__importDefault(require("cli-table3"));
const dates_1 = require("@common/dates");
const auth_1 = require("@common/auth");
const scripts = (program) => {
    program
        .command('scripts')
        .description('List scripts')
        .action(function () {
        const debug = this.opts().debug;
        villageClient_1.villageClient.scripts
            .listScripts('default') // TODO: set workspace ID here
            .then((scripts) => {
            const table = new cli_table3_1.default({
                head: ['ID', 'Name', 'Engine', 'Created at'],
            });
            for (const script of scripts) {
                table.push([
                    script.id,
                    script.name,
                    script.engine,
                    (0, dates_1.getTimeSince)(script.created_at),
                ]);
            }
            console.log(table.toString());
        })
            .catch(auth_1.warnUnauthenticated)
            .catch((err) => {
            debug && console.error(err);
        });
    });
};
exports.scripts = scripts;
//# sourceMappingURL=scripts.js.map