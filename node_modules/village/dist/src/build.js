"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const esbuild = tslib_1.__importStar(require("esbuild"));
const dotenv_1 = tslib_1.__importDefault(require("dotenv"));
dotenv_1.default.config({
    path: process.env.NODE_ENV === 'PRODUCTION'
        ? '.env.production'
        : '.env.development',
});
const die = (err) => {
    throw new Error(`env config missing: ${err}`);
};
const getEnv = (name) => {
    return `'${process.env[name]}'` || die(name);
};
esbuild.buildSync({
    entryPoints: ['./src/index.ts'],
    bundle: true,
    platform: 'node',
    target: ['node16'],
    outfile: './dist/index.js',
    external: ['esbuild'],
    define: {
        'process.env.API_BASE_URL': getEnv('API_BASE_URL'),
        'process.env.AUTH0_DOMAIN': getEnv('AUTH0_DOMAIN'),
        'process.env.AUTH0_CLIENT_ID': getEnv('AUTH0_CLIENT_ID'),
        'process.env.AUTH0_AUDIENCE': getEnv('AUTH0_AUDIENCE'),
    },
});
//# sourceMappingURL=build.js.map